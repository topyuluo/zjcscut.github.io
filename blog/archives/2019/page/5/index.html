<!DOCTYPE html>
<html>
<head hexo-theme='Volantis' version='1.5.2' docs='https://xaoxuu.com/wiki/volantis/'>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Archives: 2019 | Throwable&#39;s Blog</title>
  
  <meta name="keywords" content="thorwable,doge,Thorwable">
  
  
  <meta name="description" content="一棵还在尝试努力生存的90后韭菜Doge">
  

  

  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.10.1/css/all.min.css">
  
  
  <link rel='stylesheet' href='https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/static/css/gb.css'>
  

  
  <link rel="shortcut icon" type='image/x-icon' href="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_favicon.ico">
  

  

  
    
<link rel="stylesheet" href="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/static/css/throwable.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
    <!-- ba -->
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4df6907aebab752244c3ca1432b4ff57";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
  
</head>

<body>
  
  
  <div class="cover-wrapper">
    <cover class='cover  half'>
      
        
  <img class='logo' src='https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/blog-logo.png'/>


  <div class="m_search">
    <form name="searchform" class="form u-search-form">
      <i class="icon fas fa-search fa-fw"></i>
      <input type="text" class="input u-search-input" placeholder="(゜-゜)つロ搜一搜有没有想看的" />
    </form>
  </div>

<div class='menu navigation'>
  <ul class='h-list'>
    
      
        <li>
          <a class="nav home "
            href="/"
            
            
            id="home">
            <i class='fas fa-home fa-fw'></i>&nbsp;主页
          </a>
        </li>
      
        <li>
          <a class="nav home "
            href="/projects/"
            
            
            id="projects">
            <i class='fas fa-code-branch fa-fw'></i>&nbsp;开源项目
          </a>
        </li>
      
        <li>
          <a class="nav home "
            href="/friends/"
            
              rel="nofollow"
            
            
            id="friends">
            <i class='fas fa-link fa-fw'></i>&nbsp;友链
          </a>
        </li>
      
        <li>
          <a class="nav home "
            href="/about/"
            
              rel="nofollow"
            
            
            id="about">
            <i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
          </a>
        </li>
      
    
  </ul>
</div>
<div style="text-align: center;margin-top: 5px;" id="rollingColorfulFont"></div>
      
    </cover>
    <header class="l_header ">
  <div id="loading-bar-wrapper">
    <div id="loading-bar"></div>
  </div>

	<div class='wrapper'>
		<div class="nav-main container container--flex">
      <a class="logo flat-box" target="_self" href='/' >
        
          
          
            Throwable
          
        
      </a>
			<div class='menu navigation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/"
                  
                  
                    target="_self"
                  
                  id="home">
									<i class='fas fa-hourglass-half fa-fw'></i>&nbsp;近期
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/categories/"
                  
                    rel="nofollow"
                  
                  
                    target="_self"
                  
                  id="categories">
									<i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/tags/"
                  
                    rel="nofollow"
                  
                  
                    target="_self"
                  
                  id="tags">
									<i class='fas fa-hashtag fa-fw'></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/friends/"
                  
                    rel="nofollow"
                  
                  
                  id="friends">
									<i class='fas fa-link fa-fw'></i>&nbsp;友接
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/archives/"
                  
                    rel="nofollow"
                  
                  
                    target="_self"
                  
                  id="blogarchives">
									<i class='fas fa-archive fa-fw'></i>&nbsp;归档
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/about/"
                  
                    rel="nofollow"
                  
                  
                    target="_self"
                  
                  id="about">
									<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
								</a>
							</li>
      			
      		
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="(゜-゜)つロ搜一搜有没有想看的" />
        </form>
      </div>

			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone white-box">
    <header>
		<nav class="menu navigation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/"
                
                
                id="home">
								<i class='fas fa-clock fa-fw'></i>&nbsp;近期文章
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/blog/archives/"
                
                  rel="nofollow"
                
                
                id="blogarchives">
								<i class='fas fa-archive fa-fw'></i>&nbsp;文章归档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/projects/"
                
                
                id="projects">
								<i class='fas fa-code-branch fa-fw'></i>&nbsp;开源项目
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/friends/"
                
                  rel="nofollow"
                
                
                id="friends">
								<i class='fas fa-link fa-fw'></i>&nbsp;我的友链
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/about/"
                
                  rel="nofollow"
                
                
                id="about">
								<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于小站
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      <div class='l_main'>
	
		
  <section class="post-list ">
    
    
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/04/07/java-juc-aqs-source-code/">
      JUC同步器框架AbstractQueuedSynchronizer源码图文分析
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年4月7日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Java/Concurrency/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Java&nbsp;/&nbsp;Concurrency</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：14.2k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：58分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-06-09T11:54:33+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年6月9日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <p><img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/201905/j-a-q-s-9.png" alt=""></p>
<h2 id="前提">前提</h2>
<p>Doug Lea大神在编写JUC(<code>java.util.concurrent</code>)包的时候引入了<code>java.util.concurrent.locks.AbstractQueuedSynchronizer</code>，Abstract Queued Synchronizer，也就是&quot;基于队列实现的抽象同步器&quot;，一般我们称之为AQS。其实Doug Lea大神编写AQS是有严谨的理论基础的，他的个人博客上有一篇论文《<a href="http://gee.cs.oswego.edu/dl/papers/aqs.pdf" target="_blank" rel="noopener">The java.util.concurrent Synchronizer Framework</a>》，文章在<a href="http://ifeve.com" target="_blank" rel="noopener">http://ifeve.com</a>上可以找到相关的译文(《JUC同步器框架》)，如果想要深入研究AQS必须要理解一下该论文的内容，然后详细分析一下AQS的源码实现。本文在阅读AQS源码的时候选用的JDK版本是JDK11。</p>
<h2 id="AQS的主要功能">AQS的主要功能</h2>
<p>AQS是JUC包中用于构建锁或者其他同步组件(信号量、事件等)的基础框架类。AQS从它的实现上看主要提供了下面的功能：</p>
<ul>
<li>同步状态的原子性管理。</li>
<li>线程的阻塞和解除阻塞。</li>
<li>提供阻塞线程的存储队列。</li>
</ul>
<p>基于这三大功能，衍生出下面的附加功能：</p>
<ul>
<li>通过中断实现的任务取消，基于线程中断实现。</li>
<li>可选的超时设置，也就是调用者可以选择放弃等待。</li>
<li>定义了<code>Condition接口</code>，用于支持管程形式的await/signal/signalAll操作，代替了<code>Object</code>类基于JNI提供的wait/notify/notifyAll。</li>
</ul>
<p><code>AQS</code>还根据同步状态的不同管理方式区分为两种不同的实现：<strong>独占状态的同步器</strong>和<strong>共享状态的同步器</strong>。</p>
      
        
          <div class="button readmore">
            <a href="/2019/04/07/java-juc-aqs-source-code/" class="flat-box">
              <i class="fas fa-book-open fa-fw" aria-hidden="true"></i>
              阅读全文
            </a>
          </div>
        
      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Java/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Java</a>
        
          <a href="/blog/tags/AQS/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> AQS</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-cron-trigger/">
      特别教程-CronTrigger教程
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：1.8k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：6分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-07-15T23:57:10+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年7月15日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>特别教程-CronTrigger教程</h1>
<h2 id="介绍">介绍</h2>
<p>cron表达式是一个已经存在了很长时间的UNIX工具，因此它的调度功能非常强大且已经经过验证。CronTrigger类的功能是基于cron的调度功能实现的。</p>
<p><code>CronTrigger</code>使用&quot;cron表达式&quot;，可以创建诸如“每周一至周五上午8:00”或“每月最后一个星期五上午1:30”的触发调度时间表(调度计划)。</p>
<p>cron表达式很强大，但是它使用起来也有可能相当混乱(这里大概的意思是说cron的用法相对复杂，容易出错)。本教程旨在解决创建cron表达式的一些谜题，为用户提供一个资源，让他们可以在论坛或邮件列表中提问之前访问这个教程(减少在论坛或者邮件中的提问)。</p>
<h2 id="格式">格式</h2>
<p>cron表达式是由空格分隔的6或7个字段组成的字符串。字段可以包含任何允许的值，以及该字段允许的特殊字符的各种组合。这些字段如下所示：</p>
<table>
<thead>
<tr>
<th style="text-align:center">字段名称</th>
<th style="text-align:center">是否必须</th>
<th style="text-align:center">允许的值</th>
<th style="text-align:center">允许的特殊字符</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">秒种(Seconds)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">0-59</td>
<td style="text-align:center">, - * /</td>
</tr>
<tr>
<td style="text-align:center">分钟(Minutes)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">0-59</td>
<td style="text-align:center">, - * /</td>
</tr>
<tr>
<td style="text-align:center">小时(Hours)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">0-23</td>
<td style="text-align:center">, - * /</td>
</tr>
<tr>
<td style="text-align:center">日(Day of month)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">1-31</td>
<td style="text-align:center">, - * ? / L W</td>
</tr>
<tr>
<td style="text-align:center">月(Month)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">1-12 or JAN-DEC</td>
<td style="text-align:center">, - * /</td>
</tr>
<tr>
<td style="text-align:center">星期(Day of week)</td>
<td style="text-align:center">是</td>
<td style="text-align:center">1-7 or SUN-SAT</td>
<td style="text-align:center">, - * ? / L #</td>
</tr>
<tr>
<td style="text-align:center">年(Year)</td>
<td style="text-align:center">否</td>
<td style="text-align:center">empty(也就是不填任何值), 1970-2099</td>
<td style="text-align:center">, - * /</td>
</tr>
</tbody>
</table>
<p>译者注：这里可以看出一个cron表达式中年(Year)字段是非必须的，如果不填写此字段可以认为它其实就是<code>*</code>值。</p>
<p>所以cron表达式可以像这样简单：<code>* * * * ? *</code>，或更复杂，如这个例子所示：<code>0/5 14,18,39,52 * ? JAN,MAR,SEP MON-FRI 2002-2010</code>。</p>
<h2 id="特殊字符">特殊字符</h2>
<ul>
<li><strong>*</strong>：代表所有值 - 用于选择一个字段中的所有值。例如，分钟字段(Minutes)中的&quot;*&quot;表示 “每分钟”。</li>
<li><strong>?</strong>：代表没有具体的值 - 当你需要定义两个字段中的其中一个，另一个不需要定义id时候就十分有用(其实主要就是用在Day of month和Day of week的互斥关系中)。例如，例如我想我的触发器每月的某一日(例如第十日)触发，但是我不需要关注当天是星期几，因此我只需要把’10’设置在Day of month字段，把’?'设置在Day of week字段即可。可以参阅下面的例子来进一步了解。</li>
<li><strong>-</strong>：用于指定范围值。例如Hours字段中的&quot;10-12&quot;表示&quot;10,11和12&quot;小时(就是一个范围值)。</li>
<li><strong>,</strong>：用于指定附加值。例如Day of week字段中的&quot;MON,WED,FRI&quot;表示 “星期一，星期三和星期五”。</li>
<li><strong>/</strong>：用于指定增量(格式是：“初始值/增量”)。例如在Seconds字段中&quot;0/15&quot;表示秒数范围取值&quot;0,15,30和45&quot;，Seconds字段中&quot;5/15&quot;表示秒数范围取值&quot;5,20,35和50&quot;。上一个例子说明了，你可以在&quot;/&quot;前取非零值(其实也就是初始值不为0)，例如Day of month字段中&quot;1/3&quot;表示从月份的第一天起每三天(触发一次)。</li>
<li><strong>L</strong>：英文单词&quot;last&quot;的缩写，含义和last一致。</li>
<li><strong>W</strong>：英文单词&quot;weekday&quot;的缩写，即工作日(星期一到星期五)。</li>
</ul>
<p>注意：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'L'</span>和<span class="string">'W'</span>字符可以Day of month字段合并使用，也就是在Day of month字段中使用<span class="string">'LW'</span>，转换为“月份的最后一个工作日”。</span><br><span class="line"></span><br><span class="line">例如：<span class="string">"0 0 12 1LW * ?"</span>表示每个月的最后一个工作日中午<span class="number">12</span>点触发。</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>#</strong>：用于指定月份的&quot;第n个&quot;星期XXX*(格式：n#p，表示月份的第p个星期n，n由1开始，1表示星期日)。例如，Day of week字段的中&quot;6#3&quot;表示该月的第三个星期五(6表示星期五，#3表示第三个星期)。例如：“2#1&quot;表示月份的第一个星期一，“4#5&quot;表示月份的第五个星期三。注意最后这个例子，如果你指定了”#5”，并且月份的星期数不超过5个，那么该月份不会触发任何调度。</li>
</ul>
<p>注意：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">月份和星期缩写对应的合法字符不区分大小写。例如：MON与mon相同。</span><br></pre></td></tr></table></figure>
<h2 id="例子">例子</h2>
<p>这里有一些完整的例子：</p>
<table>
<thead>
<tr>
<th style="text-align:center">表达式</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0 0 12 * * ?</td>
<td style="text-align:center">每天中午12点（中午）触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 ? * *</td>
<td style="text-align:center">每天上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 * * ?</td>
<td style="text-align:center">每天上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 * * ? *</td>
<td style="text-align:center">每天上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 * * ? 2005</td>
<td style="text-align:center">2005年每天上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 * 14 * * ?</td>
<td style="text-align:center">每天下午2点开始，每天下午2点59分结束</td>
</tr>
<tr>
<td style="text-align:center">0 0/5 14 * * ?</td>
<td style="text-align:center">每天下午2点开始，每天下午2点55分结束，每5分钟触发一次</td>
</tr>
<tr>
<td style="text-align:center">0 0/5 14,18 * * ?</td>
<td style="text-align:center">从下午2点开始，每天5分钟触发，结束于下午2点55分，每天5点钟触发，每天晚上6点开始，结束于下午6点55分</td>
</tr>
<tr>
<td style="text-align:center">0 0-5 14 * * ?</td>
<td style="text-align:center">每天下午2点开始，结束于下午2点05分，每分钟触发</td>
</tr>
<tr>
<td style="text-align:center">0 10,44 14 ? 3 WED</td>
<td style="text-align:center">在3月份的每个星期三下午2点10分和下午2点44分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 ? * MON-FRI</td>
<td style="text-align:center">每周一，周二，周三，周四和周五上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 15 * ?</td>
<td style="text-align:center">在每个月的第15天上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 L * ?</td>
<td style="text-align:center">在每个月的最后一天上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 L-2 * ?</td>
<td style="text-align:center">在每个月的倒数第二天的上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 ? * 6L</td>
<td style="text-align:center">每个月的最后一个星期五上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 ? * 6L 2002-2005</td>
<td style="text-align:center">2002年，2003年，2004年和2005年每个月的最后一个星期五上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 15 10 ? * 6#3</td>
<td style="text-align:center">每个月的第三个星期五上午10点15分触发</td>
</tr>
<tr>
<td style="text-align:center">0 0 12 1/5 * ?</td>
<td style="text-align:center">从每月的第一天开始，每个月每隔5天下午12点（中午）触发</td>
</tr>
<tr>
<td style="text-align:center">0 11 11 11 11 ?</td>
<td style="text-align:center">每11月11日上午11点11分触发</td>
</tr>
</tbody>
</table>
<p>注意：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请注意<span class="string">'?'</span>和<span class="string">'*'</span>在日(Day of month)和星期(Day of week)中的作用。</span><br></pre></td></tr></table></figure>
<h2 id="注意事项">注意事项</h2>
<ul>
<li>目前不完全支持同时定义Day of week和Day of month两个字段(你必须在这两个字段其中之一使用’?’。其实这样做的目的是这两个字段是互斥的)。</li>
<li>你需要注意如果触发时间设置在凌晨的几个小时，你的语言环境(locale)有可能会因为“夏令时”（对于美国地区，这通常是凌晨2点之前和之后的一个小时）而发生变化 - 此时，时间迁移有可能会发生跳跃或者重复(这里是指同一个时刻重复两次，因为时间发生了回拨)，这取决于时间是向后移动还是向前移动。你可以从维基百科上查找资料确定你所在地区的具体情况，链接是：<a href="https://secure.wikimedia.org/wikipedia/en/wiki/Daylight_saving_time_around_the_world" target="_blank" rel="noopener">https://secure.wikimedia.org/wikipedia/en/wiki/Daylight_saving_time_around_the_world</a></li>
</ul>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/crontrigger.html" target="_blank" rel="noopener">crontrigger</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-12/">
      第十二章：其他特性
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：281字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：1分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:19:02+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第十二章：其他特性</h1>
<h2 id="插件">插件</h2>
<p>Quartz提供了一个用于插入附加功能的接口<code>org.quartz.spi.SchedulerPlugin</code>。</p>
<p>你可以从<code>org.quartz.plugins</code>包中找到提供各种实用功能的Quartz插件。它们提供诸如在调度器启动时自动调度Job的功能，记录Job和Trigger相关事件的历史，并确保当JVM退出时调度器能够彻底关闭。</p>
<h2 id="Job工厂">Job工厂</h2>
<p>当Trigger触发时，通过Scheduler上配置的JobFactory实例化与之关联的Job。默认的JobFactory只是在Job类上(反射)调用<code>newInstance()</code>。你可能需要创建自己的JobFactory实现，以完成诸如让应用程序的IoC或DI容器生成/初始化Job实例等等的操作。</p>
<p>请参阅<code>org.quartz.spi.JobFactory</code>接口以及<code>Scheduler#setJobFactory(fact)</code>等相关方法。</p>
<h2 id="Factory-Shipped-Jobs-这个不知道怎么翻译">Factory-Shipped Jobs(这个不知道怎么翻译)</h2>
<p>Quartz还提供了许多实用Job类型，你可以在应用程序中用于执行诸如发送电子邮件和调用EJB等Job实现。这些开箱即用的Job类型可以在org.quartz.jobs包中找到(要引入依赖quartz-jobs)。</p>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-12.html" target="_blank" rel="noopener">tutorial-lesson-12</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-11/">
      第十一章：高级(企业级)特性
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：1k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：3分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:18:18+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第十一章：高级(企业级)特性</h1>
<h2 id="集群">集群</h2>
<p>Quartz集群目前与JDBC-Jobstore（<code>JobStoreTX</code>或<code>JobStoreCMT</code>）和(&lt;–译者注：其实我觉得这里应该是&quot;或&quot;)<code>TerracottaJobStore</code>一起使用。功能包括负载均衡和Job故障转移（如果<code>JobDetail</code>的“请求恢复(request recovery)”标志设置为true）。</p>
<p>使用JobStoreTX或JobStoreCMT通过将<code>org.quartz.jobStore.isClustered</code>属性设置为<code>true</code>来启用集群模式。**集群中的每个实例都应该使用相同的quartz.properties文件。**这些相同的配置文件中，也允许下面几项属性配置是可以不相同的：不同的线程池大小，以及<code>org.quartz.scheduler.instanceId</code>设置不同的属性值。集群中的每个节点必须具有唯一的instanceId，通过将<code>AUTO</code>作为此属性的值，可以轻松完成此定义（这样就不需要使用不同的配置文件）。下面是注意事项：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不要在各自独立的机器上各自开启集群模式，除非它们的时钟使用某种形式的时间同步服务（守护进程）进行同步，而这些时间同步服务（守护进程）运行得非常有规律（各个机器的时钟差距必须在一秒内）。 如果你不熟悉如何执行此操作， 请参阅`http:<span class="comment">//www.boulder.nist.gov/timefreq/service/its.htm`。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">非集群模式下，两个不同的实例千万不要使用同一套Quartz的表。否则，你一定会遇到不正常的(调度)行为，有可能会遭遇严重的数据损坏。</span><br></pre></td></tr></table></figure>
<p>集群中触发机制是：Job每次只能被一个节点触发(也就是虽然集群中每台机器都跑着Quartz的调度器，但是Job需要被触发的时刻只有一台机器会进行触发)。我的意思是，如果Job有一个重复的Trigger，告诉它每10秒钟触发一次，那么在12:00:00，正好一个节点将执行这个Job，在12:00:10，也是由一个节点将执行此Job等。并不一定是每次由相同的节点执行Job - 由哪个节点执行它是随机的。负载均衡机制对于繁忙的调度程序（大量的Trigger）来说是近乎随机的。但是对于非繁忙(只有一两个Trigger)的调度器集群来说，有可能偏向于由同一个节点执行。(译者注：其实从源码上看，主要是看哪个节点先获取到独占锁。)</p>
<p>使用TerracottaJobStore建立Quartz集群只需要将把Scheduler的JobStore配置为TerracottaJobStore（<a href="lesson-9.md">第九章：JobStores</a>中介绍过）即可，然后你的调度器就会被设置为集群模式。</p>
<p>您可能还需要考虑如何设置Terracotta服务器，特别是开启持久化特性等功能的配置选项，以及搭建一些列高可用的Terracotta服务器。</p>
<p>TerracottaJobStore的企业版提供了高级的&quot;Quartz Where&quot;功能，允许将作业的智能定位到适当的Quartz集群节点。</p>
<p>有关JobStore和Terracotta的更多信息，请访问<code>http://www.terracotta.org/quartz</code>。</p>
<h2 id="JTA事务">JTA事务</h2>
<p>正如<a href="../quartz-doc-translation-lesson-9">第九章：JobStores</a>所述，JobStoreCMT允许在较大的JTA事务中执行Quartz调度操作。</p>
<p>通过将<code>org.quartz.scheduler.wrapJobExecutionInUserTransaction</code>属性设置为<code>true</code>，Job也可以在JTA事务（<code>UserTransaction</code>）内执行。使用此选项集，一个JTA事务将在Job的execute方法被调用之前调用其begin()方法，并且在Job执行完成调用之后调用其commit()。这适用于所有的Job。</p>
<p>如果你希望指定每个Jobs是否包裹在JTA事务内执行，那么你应该在Job类上使用<code>@ExecuteInJTATransaction</code>注解。</p>
<p>除了Quartz自动将Job执行包装到JTA事务中，使用JobStoreCMT之后在Scheduler接口方法也可以使用事务处理。你可以明确一点：在使用Scheduler接口方法之前已经开启了一个事务。你可以直接通过使用UserTransaction或将使用调度程序的代码放在使用容器管理事务的SessionBean中来执行此操作。</p>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-11.html" target="_blank" rel="noopener">tutorial-lesson-11</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-10/">
      第十章：配置、资源的使用以及SchedulerFactory
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：1.2k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：4分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:17:00+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第十章：配置、资源的使用以及SchedulerFactory</h1>
<p>Quartz的架构设计是模块化的，因此要运行它需要把几个组件组合在一起使用。幸运的是，有一些工具就是为了完成这个目标。</p>
<p>Quartz在能够正常运作之前，下面的几个核心组件必须配置好：</p>
<ul>
<li>ThreadPool</li>
<li>JobStore</li>
<li>DataSources(如果需要的话)</li>
<li>Scheduler(调度器本身，这个是核心)</li>
</ul>
<p>线程池提供了一组Quartz在执行Job时使用的线程。线程池中的线程越多，并发运行的Job数越多。但是，太多的线程可能会破坏你的系统。大多数Quartz的用户发现，5个左右的线程是充足的 - 因为在任何给定时间，他们的Job数量少于100个，通常不会同时运行这些Job，而且这些Job是短暂的（快速完成）。其他用户认为他们需要10个，15个，50个甚至100个线程，因为他们具有数万个具有各种调度计划的Trigger，最终在任何给定时刻平均执行10到100个Job。为调度器的线程池找到正确的线程池大小完全取决于你需要使用调度器来完成什么工作(这里意思应该是需要按照工作量去定义线程池大小)。没有真正的规则，除了保持线程数量尽可能小（为了你昂贵的服务器资源） - 但需要确保线程数量已足够让你的Job按时启动。请注意，如果Trigger的触发时间到达，并且线程池中没有可用的线程，Quartz将阻塞（暂停）直到线程可用，然后Job将执行 - 也就是在它本该执行的时间点延后一个时间段执行。这甚至可能导致线程的错过触发 - 如果在调度器中配置的“错过触发阈值”的持续时间内没有可用的线程。</p>
<p>ThreadPool接口在org.quartz.spi包中定义，你可以按照你喜欢的方式创建ThreadPool实现。Quartz带有一个名为<code>org.quartz.simpl.SimpleThreadPool</code>（虽然简单，但非常令人满意）的线程池。这个ThreadPool只是在它的线程池中维护一个固定的线程集 - 永远不会增长，永远不会缩小。但是它是非常强大的，测试结果令人满意 - 几乎所有使用Quartz的人都使用这个线程池。</p>
<p>JobStores和DataSource在本教程的<a href="../quartz-doc-translation-lesson-9">第九章：JobStores</a>讨论过。值得注意的是，所有JobStore都实现了org.quartz.spi.JobStore接口 - 任何一个JobStore实现都不符合你的需求，那么你可以自己创建并且自行实现org.quartz.spi.JobStore接口。</p>
<p>最后，你需要创建你的Scheduler实例。Scheduler本身需要被赋予一个名字，告诉其RMI设置，并且设置JobStore和ThreadPool的实例。RMI设置包括调度程序是否应将自身创建为RMI的服务器对象（使其可用于远程连接），要使用的主机和端口等。StdSchedulerFactory（下面将讨论）还可以创建Scheduler实例，这些Scheduler实例可以是创建在远程程序中的Scheduler的代理(RMI存根)。</p>
<h2 id="StdSchedulerFactory">StdSchedulerFactory</h2>
<p>StdSchedulerFactory是org.quartz.SchedulerFactory接口的一个实现。它使用一组属性（java.util.Properties）来创建和初始化Quartz的Scheduler实例。属性通常存储在文件中并从文件中加载，但也可以由程序创建并直接传递到工厂类实例。简单地调用工厂中的getScheduler()将生成Scheduler实例，并初始化它（和它的ThreadPool，JobStore和DataSource）并返回一个公共接口org.quartz.Scheduler的句柄。</p>
<p>在Quartz发行版的&quot;docs/config&quot;目录中有一些示例配置（包括属性的描述）。你可以在Quartz文档的“参考”部分的“配置”手册中找到完整的文档。</p>
<h2 id="DirectSchedulerFactory">DirectSchedulerFactory</h2>
<p>DirectSchedulerFactory是另一个SchedulerFactory实现。对于希望编程式创建其Scheduler实例的用户是有用的。通常不鼓励使用它，原因如下：</p>
<ul>
<li>（1）DirectSchedulerFactory要求用户更好地了解他们正在做什么。</li>
<li>（2）它不允许声明性配置(不能使用配置文件) - 换句话说，你需要硬编码Scheduler实例的所有属性项。</li>
</ul>
<h2 id="日志">日志</h2>
<p>Quartz使用SLF4J框架来满足所有的日志记录需求。为了“调整”日志记录设置（例如输出量以及输出位置），你需要了解SLF4J框架，这超出了本文档的范围。</p>
<p>如果需要捕获Trigger启动和Job执行的额外信息，可以启用<code>org.quartz.plugins.history.LoggingJobHistoryPlugin</code>或<code>org.quartz.plugins.history.LoggingTriggerHistoryPlugin</code>。</p>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-10.html" target="_blank" rel="noopener">tutorial-lesson-10</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-9/">
      第九章：JobStores
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：2k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：7分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:14:52+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第九章：JobStores</h1>
<p>JobStore负责记录你提供到调度器的所有“工作数据”：所有的Job、所有的Trigger、所有的Calendar(org.quartz.Calendar)等等。为你的Quartz调度器选择一个合适的JobStore是一个重要的步骤。幸运的是，一旦你明白不同的JobStore之间的差异，那么作出合适的选择是十分简单的。</p>
<p>你声明你提供给用于生成调度器实例对应的SchedulerFactory实例时候用到的属性文件（或对象）中，应该指定你的调度器应使用哪个类型的JobStore（以及它的相关配置）。注意一点：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">切勿在代码中直接使用JobStore实例。由于某些原因，许多使用者试图这样做。JobStore应该只用于Quartz的后台。你必须告诉Quartz（通过配置）使用哪个类型的JobStore，你在代码中应该只能使用Scheduler接口。</span><br></pre></td></tr></table></figure>
<h2 id="RAMJobStore">RAMJobStore</h2>
<p>RAMJobStore是使用最简单的JobStore，它也是性能最高的（在CPU时间方面）。RAMJobStore的功能显然和它的名字相关：它将其所有数据保存在RAM(内存)中，这就是为什么它是闪电般的快，也是为什么它的的配置这么简单。缺点是当你的应用程序结束（或崩溃）时，所有调度信息都将丢失 - 这意味着RAMJobStore无法履行作业和Trigger上的“非易失性”设置。对于某些应用程序，这是可以接受的 - 甚至是所需的行为，但对于其他应用程序，这可能是灾难性的。</p>
<p>要使用RAMJobStore（并假设您使用的是StdSchedulerFactory），只需将Quartz的JobStore类属性配置指定为org.quartz.simpl.RAMJobStore：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.jobStore<span class="class">.<span class="keyword">class</span> </span>= org.quartz.simpl.RAMJobStore</span><br></pre></td></tr></table></figure>
<p>除此之外没有其他需要担心的配置项。</p>
<h2 id="JDBCJobStore">JDBCJobStore</h2>
<p>JDBCJobStore的命名也相当恰当 - 它通过JDBC将其所有数据保存在数据库中。因此，它配置比RAMJobStore要复杂一点，而且也不是那么快。但是，它性能下降并不是很糟糕，特别是如果你使用的数据库表在相应的主键或者外键加上索引。在相对主流的并且有一个像样的局域网（在调度器和数据库之间）的机器上，检索和更新一个触发中的Trigger的时间通常将小于10毫秒。</p>
<p>JDBCJobStore几乎可以在任何类型的任何数据库中使用，已被广泛应用于Oracle，PostgreSQL，MySQL，MS SQLServer，HSQLDB和DB2。要使用JDBCJobStore，必须首先创建一组数据库表以供Quartz使用。你可以在Quartz发行版的&quot;docs/dbTables&quot;目录中找到表创建SQL脚本。如果你的数据库类型尚未有脚本，请查看其中一个脚本，然后以数据库所需的任何方式进行修改。需要注意的一点是，在这些脚本中，所有的表都以前缀&quot;QRTZ_“开始（如表&quot;QRTZ_TRIGGERS&quot;和&quot;QRTZ_JOB_DETAIL”）。你可以通知JDBCJobStore表的前缀是什么（在你的Quartz属性配置中），也就是你也可以修改这个表前缀的值。对于多个调度程序实例，使用不同的前缀可能有助于同一个数据库中的多个调度器实例创建多组表。</p>
<p>创建表后，在配置和启动JDBCJobStore之前，你还有一个重要的决定。你需要确定应用程序需要哪种类型的事务。如果你不需要将调度命令（例如添加和删除Trigger）绑定到其他代码逻辑的事务中，那么可以通过使用JobStoreTX对JobStore进行事务管理（这是最常见的选择）。</p>
<p>如果你需要Quartz与其他事务（即J2EE应用程序服务器）一起工作，那么你应该使用JobStoreCMT - 在这种情况下，Quartz将让应用程序服务器容器管理事务。</p>
<p>最后一个难题是设置一个DataSource，使得JDBCJobStore可以从中获取数据库的连接。定义Quartz的DataSource有下面的几种方式。一种方法是让Quartz创建和管理DataSource本身 - 通过提供数据库的所有连接信息。另一种方法是通过提供JDBCJobStore的DataSource的JNDI名称，让Quartz使用由Quartz正在运行的应用程序服务器来管理DataSource。有关属性的详细信息，请参阅发行版本中&quot;docs/config&quot;文件夹中的示例配置文件。</p>
<p>要使用JDBCJobStore（假设你使用的是StdSchedulerFactory），首先需要将Quartz配置文件中的的JobStore类属性设置为org.quartz.impl.jdbcjobstore.JobStoreTX或org.quartz.impl.jdbcjobstore.JobStoreCMT - 具体可以参考上一段文字的描述，不过决定权还是在你手中。</p>
<p><strong>配置Quartz以使用JobStoreTx</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.jobStore<span class="class">.<span class="keyword">class</span> </span>= org.quartz.impl.jdbcjobstore.JobStoreTX</span><br></pre></td></tr></table></figure>
<p>接下来，你需要为JobStore选择一个DriverDelegate。DriverDelegate负责执行特定数据库可能需要的任何JDBC相关的工作。StdJDBCDelegate是一个使用“vanilla(原意识香草味的，这里大概的意思是原生的)”JDBC代码（和SQL语句）来工作的。如果Quartz没有为你的数据库类型提供特定的DriverDelegate，请尝试使用此DriverDelegate - 我们仅仅为那些使用StdJDBCDelegate(几乎是最常使用)出现了问题的数据库类型提供了特殊的订造的DriverDelegate。其他DriverDelegate可以在&quot;org.quartz.impl.jdbcjobstore&quot;包或其子包中找到。其他DriverDelegate包括DB2v6Delegate（用于DB2版本6及更早版本），HSQLDBDelegate（用于HSQLDB），MSSQLDelegate（用于Microsoft SQLServer），PostgreSQLDelegate（用于PostgreSQL）），WeblogicDelegate（用于使用Weblogic创建的JDBC驱动程序）。</p>
<p>一旦你选择了DriverDelegate后，将其类名设置为JDBCJobStore的对应属性以便JDBCJobStore能够使用它。</p>
<p><strong>为JDBCJobStore配置DriverDelegate</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate</span><br></pre></td></tr></table></figure>
<p>接下来，你需要通知JobStore你正在使用的表前缀（如上所述）。</p>
<p><strong>配置JDBCJobStore对应的表前缀</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.jobStore.tablePrefix = QRTZ_</span><br></pre></td></tr></table></figure>
<p>最后，你需要设置JobStore应该使用哪个DataSource。DataSource的命名也必须在Quartz配置文件中的属性中定义。在这种情况下，我们指定Quartz应该使用DataSource名称&quot;myDS&quot;（在配置属性中的其他位置也是用这个名称去定义）。</p>
<p><strong>配置JDBCJobStore对应的DataSource</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.jobStore.dataSource = myDS</span><br></pre></td></tr></table></figure>
<p>注意事项一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果你的调度器一直处于忙碌的状态(满负载)（正在执行的Job数量几乎与线程池大小相同），那么你应该将DataSource中的连接数设置为线程池容量+<span class="number">2</span>。</span><br></pre></td></tr></table></figure>
<p>注意事项二：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以将<span class="string">"org.quartz.jobStore.useProperties"</span>配置参数设置为<span class="string">"true"</span>（默认为<span class="keyword">false</span>），以指示JDBCJobStore将JobDataMap中的所有值都作为字符串，从而JobDataMap中的属性可以作为键值对存储，而不是使用BLOB类型，因为BLOB类型是为了以其序列化形式存储更多复杂的对象。从长远来看，这是更安全的，因为你避免了将非String类序列化为BLOB类型的版本问题。</span><br></pre></td></tr></table></figure>
<h2 id="TerracottaJobStore">TerracottaJobStore</h2>
<p>TerracottaJobStore提供了一种伸缩性和鲁棒性的手段，它并不使用数据库。这意味着你的数据库可以免受Quartz的负载，可以将数据库所有资源分配给应用程序的其余部分。</p>
<p>TerracottaJobStore可以运行在群集或非群集环境在集群或者非集群环境下，TerracottaJobStore都可以为应用程序的作业数据提供存储介质，即便是应用程序重启的间隙，因为数据是存储在Terracotta服务器中。它的性能比基于使用数据库的JDBCJobStore要好得多（约一个数量级），但比RAMJobStore要慢。</p>
<p>要使用TerracottaJobStore（假设你使用的是StdSchedulerFactory），只需将配置文件中的类名称org.quartz.jobStore.class = org.terracotta.quartz.TerracottaJobStore指定为Quartz的JobStore类属性，并添加一个额外的配置项来指定Terracotta服务器的位置即可：</p>
<p><strong>使用TerracottaJobStore配置Quartz</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.jobStore<span class="class">.<span class="keyword">class</span> </span>= org.terracotta.quartz.TerracottaJobStore</span><br><span class="line">org.quartz.jobStore.tcConfigUrl = localhost:<span class="number">9510</span></span><br></pre></td></tr></table></figure>
<p>更多关于JobStore和Terracotta的内容可以参阅<code>http://www.terracotta.org/quartz</code>。</p>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-09.html" target="_blank" rel="noopener">tutorial-lesson-09</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-8/">
      第八章：Scheduler监听器
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：227字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：1分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:12:30+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第八章：Scheduler监听器</h1>
<p>SchedulerListener和TriggerListener或JobListener十分相似，它接收调度器的相关事件，调度器的相关事件不一定和特定的Trigger或者Job相关。</p>
<p>与Scheduler相关的事件包括：添加Job/Trigger、删除Job/Trigger、调度器中的严重错误以及关闭调度器的通知等等。</p>
<p><strong>org.quartz.SchedulerListener接口</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SchedulerListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobScheduled</span><span class="params">(Trigger trigger)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobUnscheduled</span><span class="params">(String triggerName, String triggerGroup)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">triggerFinalized</span><span class="params">(Trigger trigger)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">triggersPaused</span><span class="params">(String triggerName, String triggerGroup)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">triggersResumed</span><span class="params">(String triggerName, String triggerGroup)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobsPaused</span><span class="params">(String jobName, String jobGroup)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobsResumed</span><span class="params">(String jobName, String jobGroup)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">schedulerError</span><span class="params">(String msg, SchedulerException cause)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">schedulerStarted</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">schedulerInStandbyMode</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">schedulerShutdown</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">schedulingDataCleared</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SchedulerListener也是通过ListenerManager注册到调度器。SchedulerListener实例几乎可以是任何实现了org.quartz.SchedulerListener接口的对象(&lt;–译者吐槽：这句话怎么看都觉得有点多余)。</p>
<p><strong>添加SchedulerListener</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.getListenerManager().addSchedulerListener(mySchedListener);</span><br></pre></td></tr></table></figure>
<p><strong>删除SchedulerListener</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.getListenerManager().removeSchedulerListener(mySchedListener);</span><br></pre></td></tr></table></figure>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-08.html" target="_blank" rel="noopener">tutorial-lesson-08</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-7/">
      第七章：Trigger监听器和Job监听器
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：739字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：2分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:11:08+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第七章：Trigger监听器和Job监听器</h1>
<p>监听器（listener）是你创建的对象，主要作用是接收和处理调度器回调的事件(event)。TriggerListener接收到与触发器（Trigger）相关的事件，JobListener接收与调度任务(Job)相关的事件。</p>
<p>与触发器相关的事件包括：触发器正要触发，触发器错失触发，触发器触发完成（调度任务已被触发开始执行，触发器完成当次触发）。</p>
<p><strong>org.quartz.TriggerListener接口</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TriggerListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">triggerFired</span><span class="params">(Trigger trigger, JobExecutionContext context)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">vetoJobExecution</span><span class="params">(Trigger trigger, JobExecutionContext context)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">triggerMisfired</span><span class="params">(Trigger trigger)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">triggerComplete</span><span class="params">(Trigger trigger, JobExecutionContext context,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> triggerInstructionCode)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>与调度任务相关的事件包括：Job即将执行时的通知以及Job执行完成时的通知。</p>
<p><strong>org.quartz.JobListener接口</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">JobListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobToBeExecuted</span><span class="params">(JobExecutionContext context)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobExecutionVetoed</span><span class="params">(JobExecutionContext context)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jobWasExecuted</span><span class="params">(JobExecutionContext context,</span></span></span><br><span class="line"><span class="function"><span class="params">            JobExecutionException jobException)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用自定义的监听器">使用自定义的监听器</h2>
<p>要创建一个Listener，只需创建一个实现org.quartz.TriggerListener或org.quartz.JobListener接口实现的实例。然后，Listener需要在运行时注册到调度器中。Listener必须指定一个名称（通过实现JobListener接口的<code>getName()</code>方法来传入监听器的名字）。</p>
<p>为了方便起见，自定义监听器也可以继承自JobListenerSupport类或TriggerListenerSupport类，并且只需覆盖你感兴趣的方法。</p>
<p>Listener通过调度器的ListenerManager进行注册，可以通过一个匹配器(Matcher)实例去匹配监听你感兴趣的Job或者Trigger。注意下面的事项：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Listener在运行时才注册到调度器中，并且不与Job或者触发器一起存储在JobStore中。这是因为通常监听器是直接集成到应用程序之中(这里的意思大概是监听器中会有应用程序里面相关的逻辑)。因此每当应用程序启动的时候，所有的监听器需要重新注册到调度器中。</span><br></pre></td></tr></table></figure>
<p><strong>添加匹配的特定Job的JobListener</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.getListenerManager().addJobListener(myJobListener, KeyMatcher.jobKeyEquals(<span class="keyword">new</span> JobKey(<span class="string">"myJobName"</span>, <span class="string">"myJobGroup"</span>)));</span><br></pre></td></tr></table></figure>
<p>你可能需要为匹配器和关键类使用静态导入，这将使你定义匹配器的逻辑更简洁：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.JobKey.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.impl.matchers.KeyMatcher.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.impl.matchers.GroupMatcher.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.impl.matchers.AndMatcher.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.impl.matchers.OrMatcher.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.impl.matchers.EverythingMatcher.*;</span><br><span class="line">...etc.</span><br></pre></td></tr></table></figure>
<p>使用静态导入后上面的例子变成这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.getListenerManager().addJobListener(myJobListener, jobGroupEquals(<span class="string">"myJobGroup"</span>));</span><br></pre></td></tr></table></figure>
<p>添加对两个特定Group的所有Job感兴趣的JobListener：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.getListenerManager().addJobListener(myJobListener, or(jobGroupEquals(<span class="string">"myJobGroup"</span>), jobGroupEquals(<span class="string">"yourGroup"</span>)));</span><br></pre></td></tr></table></figure>
<p>添加对所有Job感兴趣的JobListener：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.getListenerManager().addJobListener(myJobListener, allJobs());</span><br></pre></td></tr></table></figure>
<p>注册TriggerListener的工作原理和JobListener基本相同。</p>
<p>大多数Quartz的使用者并不使用Listener。但是当应用程序有获取任务调度相关的事件通知的需求时，如果使用了Listener可以避免在Job的逻辑里面加入额外的通知逻辑，这一点对于使用者而言是很方便的。</p>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-07.html" target="_blank" rel="noopener">tutorial-lesson-07</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-6/">
      第六章：CronTrigger
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：2k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：7分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:07:32+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第六章：CronTrigger</h1>
<p>CronTrigger通常比SimpleTrigger更有用，如果你需要一个基于类似日历的概念重复出现的工作调度计划，而不是SimpleTrigger的精确指定时间间隔。使用CronTrigger，你可以指定任务触发的时间表，例如“每周五中午”或“每个工作日和上午9:30”，甚至“每周一至周五上午9:00至10点之间每5分钟”和1月份的星期五”。即使如此，和SimpleTrigger一样，CronTrigger有一个startTime，它指定何时生效，以及一个（可选的）endTime，用于指定何时停止任务调度。</p>
<h2 id="Cron表达式">Cron表达式</h2>
<p>Cron-Expressions用于配置CronTrigger的实例。Cron表达式是由七个子表达式组成的字符串，用于描述调度计划的各个细节。这些子表达式用空格分隔，各个部分表示如下：</p>
<ul>
<li>1.Seconds</li>
<li>2.Minutes</li>
<li>3.Hours</li>
<li>4.Day-of-Month</li>
<li>5.Month</li>
<li>6.Day-of-Week</li>
<li>7.Year (optional field -&gt; 可选的)</li>
</ul>
<p>一个完整的Cron-Expressions的例子是字符串&quot;0 0 12 ? * WED&quot; - 这意味着“每个星期三下午12:00”。单个子表达式可以包含范围值、&quot;/“或列表。例如，可以用&quot;MON-FRI”、“MON,WED,FRI&quot;或甚至&quot;MON-WED,SAT&quot;代替前一个（例如&quot;WED”）示例中的星期几字段。</p>
<p>通配符（<code>'*'，在官方文档中是''，估计是官方文档有误，cron不支持空字符串</code>）可用于说明该字段可以取任何值。因此，前一个例子的Month字段中的’<em>‘字符仅仅是“每个月”。因此，Day-of-Month字段中的’</em>'显然意味着“每周的每一天”。</p>
<p>所有字段都有一组可以指定的有效值。这些值应该是相当明显的 - 例如Seconds和Minutes只允许数字0到59，Hours只允许数字0到23。Day-of-Month可以是1-31的任何值，但是你需要注意在给定的月份中有多少天！Month可以指定为0到11之间的值，或者使用字符串JAN，FEB，MAR，APR，MAY，JUN，JUL，AUG，SEP，OCT，NOV和DEC。Day-of-Week可以指定为1到7（1 = 星期日）之间的值，或者使用字符串SUN，MON，TUE，WED，THU，FRI和SAT。</p>
<p>'/'字符可用于指定值的增量。例如，如果在Minutes字段中输入&quot;0/15&quot;，则表示“从第0分钟开始开始，每隔15分钟”。如果你在Minutes字段中使用&quot;3/20&quot;，则意味着“从第3分钟开始，每隔20分钟” - 换句话说，它与Minutes字段中定义的&quot;3,243,43&quot;意义相同。请注意&quot;/35&quot;的细微之处并不代表“每35分钟” - 这意味着“从第0分钟开始，每隔35分钟” - 或者换句话说，与指定&quot;0,35&quot;相同。</p>
<p>‘?‘字符只允许使用在Day-of-Month和Day-of-Week字段中。用于表示“没有特定的值”。当您需要在Day-of-Month和Day-of-Week两个字段之一定义其中一个字段的确切值，那么另一个字段可以用’?’，这点十分有用。请参阅下面的示例（和CronTrigger JavaDoc）以进行说明。</p>
<p>‘L’字符只允许用于Day-of-Month和Day-of-Week字段中。这个字符其实就是’last’的缩写，但是在Day-of-Month和Day-of-Week各自的字段中有不同的含义。例如，Day-of-Month字段中的&quot;L&quot;表示“月的最后一天” - 例如1月31日，非闰年2月28日。如果在Day-of-Week字段中使用它，它只是意味着&quot;7&quot;或&quot;SAT&quot;。但是在使用了Day-of-Month前提下，在Day-of-Week中使用’L’，就意味着“xxx月的最后一个星期xxx”，例如&quot;6L&quot;或&quot;FRIL&quot;都意味着“月的最后一个星期五”。你还可以指定月份最后一天的偏移量，例如&quot;L-3&quot;，这意味着一个月份的倒数第三天。当使用’L’选项时，切记不要指定列表或范围值，因为你会得到混乱或者意外的结果。</p>
<p>'W’用于指定给定日期最相近的工作日（星期一至星期五）。例如，如果将&quot;15W&quot;指定为Day-of-Month字段的值，则意思是：“距离本月15日最近的工作日”。</p>
<p>'#‘用于指定月份的“第n个”星期XXX，格式是’n#p’，表示月的第p个星期n。例如，Day-of-Week字段中的&quot;6＃3&quot;或&quot;FRI＃3&quot;的值表示“月的第三个星期五”。</p>
<p>以下是一些表达式及其含义的示例 - 你可以在JavaDoc的org.quartz.CronExpression中找到更多的资料。</p>
<p>译者注：这里有疑惑的就是’*‘和’?'的区别，总结如下：</p>
<ul>
<li><code>问号(?)的作用是指明该字段“没有特定的值”，星号(*)指明该字段“代表所有可能值”</code>。</li>
<li><code>星号(*)和其它值，比如数字，都是给该字段指明特定的值，只不过用星号(*)代表所有可能值</code>。</li>
<li><code>Cron-Expression对日期和星期字段的处理规则是它们必须互斥，即只能且必须有一个字段有特定的值，另一个字段必须是“没有特定的值”</code>。</li>
<li><code>问号(?)就是用来对日期和星期字段做互斥的</code>。</li>
</ul>
<h2 id="Cron表达式示例">Cron表达式示例</h2>
<p>CronTrigger示例1 - 创建一个触发器的表达式，每5分钟就会触发一次</p>
<p><code>&quot;0 0/5 * * * ?&quot;</code></p>
<p>CronTrigger示例2 - 创建一个触发器的表达式，每5分钟触发一次，分钟后10秒（即上午10时10分，上午10:05:10等）。</p>
<p><code>&quot;10 0/5 * * * ?&quot;</code></p>
<p>CronTrigger示例3 -  创建一个触发器的表达式，在每个星期三和星期五的10:30，11:30，12:30和13:30创建触发器的表达式。</p>
<p><code>&quot;0 30 10-13 ? * WED,FRI&quot;</code></p>
<p>CronTrigger示例4 -  创建一个触发器的表达式，每个月5日和20日上午8点至10点之间每半小时触发一次。请注意，触发器将不会在上午10点开始，仅在8:00，8:30，9:00和9:30</p>
<p><code>&quot;0 0/30 8-9 5,20 * ?&quot;</code></p>
<p>请注意，一些调度要求太复杂，无法用单一触发表示 - 例如“每上午9:00至10:00之间每5分钟，下午1:00至晚上10点之间每20分钟”一次。在这种情况下的解决方案是简单地创建两个触发器，并用它们来触发相同的Job。</p>
<h2 id="构建CronTrigger">构建CronTrigger</h2>
<p>CronTrigger实例使用TriggerBuilder（用于设置触发器的主要属性）和CronScheduleBuilder（对于CronTrigger特定的属性）构建。要以DSL风格使用这些构建器，请使用静态导入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.TriggerBuilder.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.CronScheduleBuilder.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.DateBuilder.*:</span><br></pre></td></tr></table></figure>
<p><strong>建立一个触发器，每天上午8点至下午5点之间每隔一分钟触发一次</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">  .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">  .withSchedule(cronSchedule(<span class="string">"0 0/2 8-17 * * ?"</span>))</span><br><span class="line">  .forJob(<span class="string">"myJob"</span>, <span class="string">"group1"</span>)</span><br><span class="line">  .build();</span><br></pre></td></tr></table></figure>
<p><strong>建立一个触发器，将在上午10:42每天触发一次</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">   .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">   .withSchedule(dailyAtHourAndMinute(<span class="number">10</span>, <span class="number">42</span>))</span><br><span class="line">   .forJob(myJobKey)</span><br><span class="line">   .build();</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">  .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">  .withSchedule(cronSchedule(<span class="string">"0 42 10 * * ?"</span>))</span><br><span class="line">  .forJob(myJobKey)</span><br><span class="line">  .build();</span><br></pre></td></tr></table></figure>
<p><strong>建立一个触发器，将在星期三上午10:42在TimeZone（系统默认值）之外触发</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">  .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">  .withSchedule(weeklyOnDayAndHourAndMinute(DateBuilder.WEDNESDAY, <span class="number">10</span>, <span class="number">42</span>))</span><br><span class="line">  .forJob(myJobKey)</span><br><span class="line">  .inTimeZone(TimeZone.getTimeZone(<span class="string">"America/Los_Angeles"</span>))</span><br><span class="line">  .build();</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">  .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">  .withSchedule(cronSchedule(<span class="string">"0 42 10 ? * WED"</span>))</span><br><span class="line">  .inTimeZone(TimeZone.getTimeZone(<span class="string">"America/Los_Angeles"</span>))</span><br><span class="line">  .forJob(myJobKey)</span><br><span class="line">  .build();</span><br></pre></td></tr></table></figure>
<h2 id="CronTrigger-Misfire说明">CronTrigger Misfire说明</h2>
<p>以下错过触发配置可以用于通知Quartz当CronTrigger发生错失触发时应该做什么。（Misfire策略的介绍可以参考<a href="../quartz-doc-translation-lesson-4">第四章：关于Trigger的更多细节</a>）。这些策略以常量的形式在CronTrigger接口中定义（常量上包括描述其行为的JavaDoc）。这些常量包括：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY</span><br><span class="line">MISFIRE_INSTRUCTION_DO_NOTHING</span><br><span class="line">MISFIRE_INSTRUCTION_FIRE_NOW</span><br></pre></td></tr></table></figure>
<p>所有触发器都可以使用Trigger.MISFIRE_INSTRUCTION_SMART_POLICY错过触发策略，它就是所有触发器默认的错失触发策略。“SMART POLICY”策略在使用了CronTrigger的情况下解释为MISFIRE_INSTRUCTION_FIRE_NOW。<code>CronTrigger.updateAfterMisfire()</code>方法的JavaDoc解释了此行为的确切细节。</p>
<p>在构建CronTriggers时，你可以将misfire指令指定为cron schedule(cron 调度)的一部分（通过CronSchedulerBuilder）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">    .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">    .withSchedule(cronSchedule(<span class="string">"0 0/2 8-17 * * ?"</span>)</span><br><span class="line">        ..withMisfireHandlingInstructionFireAndProceed())</span><br><span class="line">    .forJob(<span class="string">"myJob"</span>, <span class="string">"group1"</span>)</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-06.html" target="_blank" rel="noopener">tutorial-lesson-06</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box card-shadow  reveal ">
  


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  <h2 class="title">
    <a href="/2019/03/30/quartz-doc-translation-lesson-5/">
      第五章：SimpleTrigger
    </a>
  </h2>


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="http://throwable.club" rel="nofollow">
        
          <img src="https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg">
        
        <p>Throwable</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-edit" aria-hidden="true"></i>
    <p>发布于：2019年3月30日</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Middleware/Quartz/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Middleware&nbsp;/&nbsp;Quartz</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard" aria-hidden="true"></i>
      <p>字数：1.5k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half" aria-hidden="true"></i>
      <p>时长：5分钟</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-03-30T11:05:59+08:00">
  <a class='notlink'>
    <i class="fas fa-save" aria-hidden="true"></i>
    <p>更新于：2019年3月30日</p>
  </a>
</div>

          
        
          
            

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      <h1>第五章：SimpleTrigger</h1>
<p>SimpleTrigger可以满足的调度需求是：在具体的时间点执行一次，或者在具体的时间点执行并且以指定的间隔重复执行若干次（其实永远重复也可以）。比如，你有一个Trigger，你可以设置它在2015年1月13日的上午11:23:54准时触发，或者在当前这个时间点触发，并且每隔2秒触发一次，一共重复5次。</p>
<p>根据描述，你可能已经发现了，SimpleTrigger的属性包括：开始时间、结束时间、重复次数以及重复的间隔。这些属性的含义与你所期望的是一致的，只是关于结束时间有一些地方需要注意。</p>
<p>重复次数，可以是0、正整数，以及常量SimpleTrigger.REPEAT_INDEFINITELY(实际值为-1，即无限重复执行次数)。重复的间隔，必须是0，或者long型的正数，单位是毫秒。注意，如果重复间隔为0，Trigger将会以重复次数并发执行(或者以Scheduler可以处理的近似并发数并发执行)。</p>
<p>如果你还不熟悉Quartz的DateBuilder类，了解后你会发现使用它可以非常方便地构造基于startTime(或endTime)的调度策略。</p>
<p>endTime属性的值会覆盖设置重复次数的属性值；比如，你可以创建一个Trigger，在终止时间之前每隔10秒执行一次，你不需要去计算在开始时间和终止时间之间的重复次数，只需要设置终止时间并将重复次数设置为REPEAT_INDEFINITELY(当然，你也可以将重复次数设置为一个很大的值，并保证该值比Trigger在终止时间之前实际触发的次数要大即可)。</p>
<p>SimpleTrigger实例通过TriggerBuilder设置主要的属性，通过SimpleScheduleBuilder设置与SimpleTrigger相关的属性。要使用这些builder的静态方法，需要静态导入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.TriggerBuilder.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.SimpleScheduleBuilder.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.DateBuilder.*:</span><br></pre></td></tr></table></figure>
<p>下面的例子，是基于简单调度(simple schedule)创建的Trigger。建议都看一下，因为每个例子都包含一个不同的实现：</p>
<p><strong>指定时间开始触发，不重复触发</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SimpleTrigger trigger = (SimpleTrigger) newTrigger()</span><br><span class="line">   .withIdentity(<span class="string">"trigger1"</span>, <span class="string">"group1"</span>)</span><br><span class="line">   .startAt(myStartTime) <span class="comment">// some Date</span></span><br><span class="line">   .forJob(<span class="string">"job1"</span>, <span class="string">"group1"</span>) <span class="comment">// identify job with name, group strings</span></span><br><span class="line">   .build();</span><br></pre></td></tr></table></figure>
<p><strong>指定时间触发，每隔10秒触发一次，重复10次</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">       .withIdentity(<span class="string">"trigger3"</span>, <span class="string">"group1"</span>)</span><br><span class="line">       .startAt(myTimeToStartFiring)  <span class="comment">// if a start time is not given (if this line were omitted), "now" is implied</span></span><br><span class="line">       .withSchedule(simpleSchedule()</span><br><span class="line">           .withIntervalInSeconds(<span class="number">10</span>)</span><br><span class="line">           .withRepeatCount(<span class="number">10</span>)) <span class="comment">// note that 10 repeats will give a total of 11 firings</span></span><br><span class="line">       .forJob(myJob) <span class="comment">// identify job with handle to its JobDetail itself</span></span><br><span class="line">       .build();</span><br></pre></td></tr></table></figure>
<p><strong>5分钟以后开始触发，仅触发一次</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trigger = (SimpleTrigger) newTrigger() </span><br><span class="line">    .withIdentity(<span class="string">"trigger5"</span>, <span class="string">"group1"</span>)</span><br><span class="line">    .startAt(futureDate(<span class="number">5</span>, IntervalUnit.MINUTE)) <span class="comment">// use DateBuilder to create a date in the future</span></span><br><span class="line">    .forJob(myJobKey) <span class="comment">// identify job with its JobKey</span></span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>
<p><strong>立即触发，每个5分钟触发一次，直到22:00</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">    .withIdentity(<span class="string">"trigger7"</span>, <span class="string">"group1"</span>)</span><br><span class="line">    .withSchedule(simpleSchedule()</span><br><span class="line">        .withIntervalInMinutes(<span class="number">5</span>)</span><br><span class="line">        .repeatForever())</span><br><span class="line">    .endAt(dateOf(<span class="number">22</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>
<p><strong>建立一个触发器，将在下一个小时的整点触发，然后每2小时重复触发一次</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">      .withIdentity(<span class="string">"trigger8"</span>) <span class="comment">// because group is not specified, "trigger8" will be in the default group</span></span><br><span class="line">      .startAt(evenHourDate(<span class="keyword">null</span>)) <span class="comment">// get the next even-hour (minutes and seconds zero ("00:00"))</span></span><br><span class="line">      .withSchedule(simpleSchedule()</span><br><span class="line">          .withIntervalInHours(<span class="number">2</span>)</span><br><span class="line">          .repeatForever())</span><br><span class="line">      <span class="comment">// note that in this example, 'forJob(..)' is not called which is valid </span></span><br><span class="line">      <span class="comment">// if the trigger is passed to the scheduler along with the job  </span></span><br><span class="line">      .build();</span><br><span class="line"></span><br><span class="line">  scheduler.scheduleJob(trigger, job);</span><br></pre></td></tr></table></figure>
<p>请查阅TriggerBuilder和SimpleScheduleBuilder提供的方法，以便了解对上述示例中未提到的选项。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TriggerBuilder(以及Quartz的其它builder)会为那些没有被显式设置的属性选择合理的默认值。比如：如果你没有调用withIdentity(..)方法，TriggerBuilder会为Trigger生成一个随机的名称；如果没有调用startAt(..)方法，则默认使用当前时间，即Trigger立即生效。</span><br></pre></td></tr></table></figure>
<h2 id="SimpleTrigger-Misfire策略">SimpleTrigger Misfire策略</h2>
<p>SimpleTrigger有几个misfire相关的策略，告诉quartz当misfire发生的时候应该如何处理。(Misfire策略的介绍可以参考<a href="../quartz-doc-translation-lesson-4">第四章：关于Trigger的更多细节</a>)。这些策略以常量的形式在SimpleTrigger中定义(JavaDoc中介绍了它们的功能)。这些策略包括：</p>
<p><strong>SimpleTrigger的Misfire策略常量</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MISFIRE_INSTRUCTION_SMART_POLICY </span><br><span class="line">MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY</span><br><span class="line">MISFIRE_INSTRUCTION_FIRE_NOW</span><br><span class="line">MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_EXISTING_REPEAT_COUNT</span><br><span class="line">MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_REMAINING_REPEAT_COUNT</span><br><span class="line">MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT</span><br><span class="line">MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_EXISTING_COUNT</span><br></pre></td></tr></table></figure>
<p>译者补充：其实这些错过触发策略基本都可以从名称得出它们的实际操作，总结如下：</p>
<ul>
<li>MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY：这个不是忽略已经错失的触发的意思，而是说忽略MisFire策略。它会在资源合适的时候，重新触发所有的MisFire的错过触发，并且不会影响现有的调度时间。比如，SimpleTrigger每15秒执行一次，而中间有5分钟时间它都MisFire了，一共错失了20次触发，5分钟后，假设资源充足了，并且任务允许并发，它会被一次性并发触发20次。</li>
<li>MISFIRE_INSTRUCTION_FIRE_NOW：忽略已经MisFire的触发，并且立即触发一次。这通常只适用于只执行一次的任务。</li>
<li>MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_EXISTING_REPEAT_COUNT：将startTime设置当前时间，立即重新触发，包括MisFire的触发。</li>
<li>MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_REMAINING_REPEAT_COUNT：将startTime设置当前时间，立即重新触发，不包括MisFire的触发。</li>
<li>MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_EXISTING_COUNT：在下一次调度时间点触发，包括MisFire的的触发。</li>
<li>MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT：在下一次调度时间点触发，不包括MisFire的的触发。</li>
<li>MISFIRE_INSTRUCTION_SMART_POLICY：默认策略，大致意思是“把处理逻辑交给聪明的Quartz去决定”。
<ul>
<li>如果是只执行一次的调度，使用MISFIRE_INSTRUCTION_FIRE_NOW。</li>
<li>如果是无限次的调度(repeatCount是无限的)，使用MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT。</li>
<li>否则，使用MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_EXISTING_REPEAT_COUNT。</li>
</ul>
</li>
</ul>
<p>其实，错过触发的策略相对复杂，可以参考<a href="https://dzone.com/articles/quartz-scheduler-misfire" target="_blank" rel="noopener">Quartz Scheduler Misfire Instructions Explained</a>。</p>
<p>回顾一下，所有的Trigger都有一个Trigger.MISFIRE_INSTRUCTION_SMART_POLICY策略可以使用，该策略也是所有Trigger的默认策略。</p>
<p>如果使用<code>smart policy</code>，SimpleTrigger会根据实例的配置及状态，在所有MISFIRE策略中动态选择一种Misfire策略。可以从SimpleTrigger.updateAfterMisfire()的JavaDoc中解释了该动态行为的具体细节。</p>
<p>在使用SimpleTrigger构造Trigger时，misfire策略作为简单调度(simple schedule)的一部分进行配置(通过SimpleSchedulerBuilder设置)，例子如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">trigger = newTrigger()</span><br><span class="line">       .withIdentity(<span class="string">"trigger7"</span>, <span class="string">"group1"</span>)</span><br><span class="line">       .withSchedule(simpleSchedule()</span><br><span class="line">           .withIntervalInMinutes(<span class="number">5</span>)</span><br><span class="line">           .repeatForever()</span><br><span class="line">           .withMisfireHandlingInstructionNextWithExistingCount())</span><br><span class="line">       .build();</span><br></pre></td></tr></table></figure>
<p>原文链接：<a href="http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-05.html" target="_blank" rel="noopener">tutorial-lesson-05</a></p>

      
    </div>
    <!-- 
      <div class="full-width auto-padding tags">
        
          <a href="/blog/tags/Middleware/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Middleware</a>
        
          <a href="/blog/tags/Quartz/" rel="nofollow"><i class="fas fa-tag fa-fw"></i> Quartz</a>
        
      </div>
     -->
  </section>
</article>

          </div>
        
      
    
  </section>
  
    
      <br>
      <div class="prev-next">
        
          <a class="prev" rel="prev" href="/blog/archives/2019/page/4/">
            <section class="post prev white-box card-shadow " >
              <i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;上一页&nbsp;
            </section>
          </a>
        
        <p class="current">
          5 / 7
        </p>
        
          <a class="next" rel="next" href="/blog/archives/2019/page/6/">
            <section class="post next white-box card-shadow ">
              &nbsp;下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i>
            </section>
          </a>
        
      </div>
    
    <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
    
    

  


	
</div>
<aside class='l_side'>
  
    
    
      
        
          <section class='widget card-shadow  blogger'>
  <div class='content'>
    
      <div class='avatar'>
        <img class='avatar' src='https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/mine/doge_avatar.jpg'/>
      </div>
    
    
    
      <div class="social-wrapper">
        
          
            <a href="/atom.xml"
              class="social fas fa-rss fa-lg flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:739805340@qq.com"
              class="social fas fa-envelope fa-lg flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/zjcscut"
              class="social fab fa-github fa-lg flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
      
        
      
        
      
        
          
  <section class='widget card-shadow  category'>
    <header>
  <div>
    
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><span class='name'>文章分类</span>
    

  </div>
  
    <a class="rightBtn"
    
      rel="external nofollow noopener noreferrer"
    
    
      target="_self"
    
    href="/categories/"
    title="categories/">
    <i class="fas fa-expand-arrows-alt fa-fw"></i></a>
  
</header>

    <div class='content'>
      <ul class="entry navigation">
        
          <li><a class="flat-box"
            title="/blog/categories/Framework/" href="/blog/categories/Framework/"
            id="blogcategoriesFramework"
            ><div class='name'>Framework</div><div class='badge'>(8)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Framework/Archunit/" href="/blog/categories/Framework/Archunit/"
            id="blogcategoriesFrameworkArchunit"
            ><div class='name'>Archunit</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Framework/Cglib/" href="/blog/categories/Framework/Cglib/"
            id="blogcategoriesFrameworkCglib"
            ><div class='name'>Cglib</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Framework/Hystrix/" href="/blog/categories/Framework/Hystrix/"
            id="blogcategoriesFrameworkHystrix"
            ><div class='name'>Hystrix</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Framework/Micrometer/" href="/blog/categories/Framework/Micrometer/"
            id="blogcategoriesFrameworkMicrometer"
            ><div class='name'>Micrometer</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Framework/Mybatis/" href="/blog/categories/Framework/Mybatis/"
            id="blogcategoriesFrameworkMybatis"
            ><div class='name'>Mybatis</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Framework/Zuul/" href="/blog/categories/Framework/Zuul/"
            id="blogcategoriesFrameworkZuul"
            ><div class='name'>Zuul</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Go/" href="/blog/categories/Go/"
            id="blogcategoriesGo"
            ><div class='name'>Go</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Go/Golang/" href="/blog/categories/Go/Golang/"
            id="blogcategoriesGoGolang"
            ><div class='name'>Golang</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/In-Action/" href="/blog/categories/In-Action/"
            id="blogcategoriesIn-Action"
            ><div class='name'>In Action</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/In-Action/Distributed-Transaction/" href="/blog/categories/In-Action/Distributed-Transaction/"
            id="blogcategoriesIn-ActionDistributed-Transaction"
            ><div class='name'>Distributed Transaction</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Java/" href="/blog/categories/Java/"
            id="blogcategoriesJava"
            ><div class='name'>Java</div><div class='badge'>(37)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Algorithm/" href="/blog/categories/Java/Algorithm/"
            id="blogcategoriesJavaAlgorithm"
            ><div class='name'>Algorithm</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Annotation/" href="/blog/categories/Java/Annotation/"
            id="blogcategoriesJavaAnnotation"
            ><div class='name'>Annotation</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Concurrency/" href="/blog/categories/Java/Concurrency/"
            id="blogcategoriesJavaConcurrency"
            ><div class='name'>Concurrency</div><div class='badge'>(9)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Design-Pattern/" href="/blog/categories/Java/Design-Pattern/"
            id="blogcategoriesJavaDesign-Pattern"
            ><div class='name'>Design Pattern</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Enum/" href="/blog/categories/Java/Enum/"
            id="blogcategoriesJavaEnum"
            ><div class='name'>Enum</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Functional-Programming/" href="/blog/categories/Java/Functional-Programming/"
            id="blogcategoriesJavaFunctional-Programming"
            ><div class='name'>Functional Programming</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Instrument/" href="/blog/categories/Java/Instrument/"
            id="blogcategoriesJavaInstrument"
            ><div class='name'>Instrument</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Introspector/" href="/blog/categories/Java/Introspector/"
            id="blogcategoriesJavaIntrospector"
            ><div class='name'>Introspector</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/JVM/" href="/blog/categories/Java/JVM/"
            id="blogcategoriesJavaJVM"
            ><div class='name'>JVM</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Lambda/" href="/blog/categories/Java/Lambda/"
            id="blogcategoriesJavaLambda"
            ><div class='name'>Lambda</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Netty/" href="/blog/categories/Java/Netty/"
            id="blogcategoriesJavaNetty"
            ><div class='name'>Netty</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Java/Reflection/" href="/blog/categories/Java/Reflection/"
            id="blogcategoriesJavaReflection"
            ><div class='name'>Reflection</div><div class='badge'>(8)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Life/" href="/blog/categories/Life/"
            id="blogcategoriesLife"
            ><div class='name'>Life</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Middleware/" href="/blog/categories/Middleware/"
            id="blogcategoriesMiddleware"
            ><div class='name'>Middleware</div><div class='badge'>(34)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Middleware/Quartz/" href="/blog/categories/Middleware/Quartz/"
            id="blogcategoriesMiddlewareQuartz"
            ><div class='name'>Quartz</div><div class='badge'>(14)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Middleware/RabbitMQ/" href="/blog/categories/Middleware/RabbitMQ/"
            id="blogcategoriesMiddlewareRabbitMQ"
            ><div class='name'>RabbitMQ</div><div class='badge'>(9)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Middleware/Redis/" href="/blog/categories/Middleware/Redis/"
            id="blogcategoriesMiddlewareRedis"
            ><div class='name'>Redis</div><div class='badge'>(10)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Middleware/Zookeeper/" href="/blog/categories/Middleware/Zookeeper/"
            id="blogcategoriesMiddlewareZookeeper"
            ><div class='name'>Zookeeper</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/MySQL/" href="/blog/categories/MySQL/"
            id="blogcategoriesMySQL"
            ><div class='name'>MySQL</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Netty/" href="/blog/categories/Netty/"
            id="blogcategoriesNetty"
            ><div class='name'>Netty</div><div class='badge'>(5)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Netty/Java/" href="/blog/categories/Netty/Java/"
            id="blogcategoriesNettyJava"
            ><div class='name'>Java</div><div class='badge'>(5)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/SOFAStack/" href="/blog/categories/SOFAStack/"
            id="blogcategoriesSOFAStack"
            ><div class='name'>SOFAStack</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/SOFAStack/Nacos/" href="/blog/categories/SOFAStack/Nacos/"
            id="blogcategoriesSOFAStackNacos"
            ><div class='name'>Nacos</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Spring-Cloud/" href="/blog/categories/Spring-Cloud/"
            id="blogcategoriesSpring-Cloud"
            ><div class='name'>Spring Cloud</div><div class='badge'>(6)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Spring-Cloud/Spring-Cloud-Gateway/" href="/blog/categories/Spring-Cloud/Spring-Cloud-Gateway/"
            id="blogcategoriesSpring-CloudSpring-Cloud-Gateway"
            ><div class='name'>Spring Cloud Gateway</div><div class='badge'>(6)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/Spring/" href="/blog/categories/Spring/"
            id="blogcategoriesSpring"
            ><div class='name'>Spring</div><div class='badge'>(5)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Spring/Prometheus/" href="/blog/categories/Spring/Prometheus/"
            id="blogcategoriesSpringPrometheus"
            ><div class='name'>Prometheus</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Spring/SpringBoot/" href="/blog/categories/Spring/SpringBoot/"
            id="blogcategoriesSpringSpringBoot"
            ><div class='name'>SpringBoot</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/Spring/SpringMVC/" href="/blog/categories/Spring/SpringMVC/"
            id="blogcategoriesSpringSpringMVC"
            ><div class='name'>SpringMVC</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/SpringBoot/" href="/blog/categories/SpringBoot/"
            id="blogcategoriesSpringBoot"
            ><div class='name'>SpringBoot</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/blog/categories/SpringBoot/Nacos/" href="/blog/categories/SpringBoot/Nacos/"
            id="blogcategoriesSpringBootNacos"
            ><div class='name'>Nacos</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/blog/categories/hexo/" href="/blog/categories/hexo/"
            id="blogcategorieshexo"
            ><div class='name'>hexo</div><div class='badge'>(1)</div></a></li>
        
      </ul>
    </div>
  </section>


        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
      
        
      
        
      
        
      
        
          
  <section class='widget card-shadow  tagcloud'>
    <header>
  <div>
    
      <i class="fas fa-tags fa-fw" aria-hidden="true"></i><span class='name'>热门标签</span>
    

  </div>
  
    <a class="rightBtn"
    
      rel="external nofollow noopener noreferrer"
    
    
      target="_self"
    
    href="/tags/"
    title="tags/">
    <i class="fas fa-expand-arrows-alt fa-fw"></i></a>
  
</header>

    <div class='content'>
      <a href="/blog/tags/AQS/" style="font-size: 14px; color: #999">AQS</a> <a href="/blog/tags/Algorithm/" style="font-size: 14px; color: #999">Algorithm</a> <a href="/blog/tags/Annotation/" style="font-size: 14px; color: #999">Annotation</a> <a href="/blog/tags/Archunit/" style="font-size: 14px; color: #999">Archunit</a> <a href="/blog/tags/Cglib/" style="font-size: 14.83px; color: #939393">Cglib</a> <a href="/blog/tags/Concurrency/" style="font-size: 14.83px; color: #939393">Concurrency</a> <a href="/blog/tags/Design-Pattern/" style="font-size: 14px; color: #999">Design Pattern</a> <a href="/blog/tags/Distributed-Transaction/" style="font-size: 14.83px; color: #939393">Distributed Transaction</a> <a href="/blog/tags/Enum/" style="font-size: 14px; color: #999">Enum</a> <a href="/blog/tags/ExecutorService/" style="font-size: 14px; color: #999">ExecutorService</a> <a href="/blog/tags/Framework/" style="font-size: 17.33px; color: #828282">Framework</a> <a href="/blog/tags/Go/" style="font-size: 14px; color: #999">Go</a> <a href="/blog/tags/Golang/" style="font-size: 14px; color: #999">Golang</a> <a href="/blog/tags/Hystrix/" style="font-size: 14px; color: #999">Hystrix</a> <a href="/blog/tags/In-Action/" style="font-size: 16.5px; color: #888">In Action</a> <a href="/blog/tags/Instrument/" style="font-size: 14px; color: #999">Instrument</a> <a href="/blog/tags/Introspector/" style="font-size: 14px; color: #999">Introspector</a> <a href="/blog/tags/JSR-310/" style="font-size: 17.33px; color: #828282">JSR-310</a> <a href="/blog/tags/JVM/" style="font-size: 14px; color: #999">JVM</a> <a href="/blog/tags/Java/" style="font-size: 24px; color: #555">Java</a> <a href="/blog/tags/Lambda/" style="font-size: 14px; color: #999">Lambda</a> <a href="/blog/tags/Life/" style="font-size: 14px; color: #999">Life</a> <a href="/blog/tags/ListenableFuture/" style="font-size: 14px; color: #999">ListenableFuture</a> <a href="/blog/tags/Micrometer/" style="font-size: 14.83px; color: #939393">Micrometer</a> <a href="/blog/tags/Middleware/" style="font-size: 23.17px; color: #5b5b5b">Middleware</a> <a href="/blog/tags/MySQL/" style="font-size: 14px; color: #999">MySQL</a> <a href="/blog/tags/Mybatis/" style="font-size: 14px; color: #999">Mybatis</a> <a href="/blog/tags/Nacos/" style="font-size: 14.83px; color: #939393">Nacos</a> <a href="/blog/tags/Netty/" style="font-size: 18.17px; color: #7d7d7d">Netty</a> <a href="/blog/tags/Object/" style="font-size: 14px; color: #999">Object</a> <a href="/blog/tags/Optional/" style="font-size: 14px; color: #999">Optional</a> <a href="/blog/tags/Quartz/" style="font-size: 22.33px; color: #606060">Quartz</a> <a href="/blog/tags/RabbitMQ/" style="font-size: 20.67px; color: #6c6c6c">RabbitMQ</a> <a href="/blog/tags/Redis/" style="font-size: 21.5px; color: #666">Redis</a> <a href="/blog/tags/Reference/" style="font-size: 14px; color: #999">Reference</a> <a href="/blog/tags/Reflection/" style="font-size: 19.83px; color: #717171">Reflection</a> <a href="/blog/tags/SOFAStack/" style="font-size: 14px; color: #999">SOFAStack</a> <a href="/blog/tags/Security/" style="font-size: 14px; color: #999">Security</a> <a href="/blog/tags/Spring/" style="font-size: 17.33px; color: #828282">Spring</a> <a href="/blog/tags/Spring-Cloud/" style="font-size: 18.17px; color: #7d7d7d">Spring Cloud</a> <a href="/blog/tags/Spring-Cloud-Gateway/" style="font-size: 19px; color: #777">Spring Cloud Gateway</a> <a href="/blog/tags/SpringBoot/" style="font-size: 15.67px; color: #8e8e8e">SpringBoot</a> <a href="/blog/tags/SpringCloud/" style="font-size: 14px; color: #999">SpringCloud</a> <a href="/blog/tags/SpringMVC/" style="font-size: 14.83px; color: #939393">SpringMVC</a> <a href="/blog/tags/Thread/" style="font-size: 14.83px; color: #939393">Thread</a> <a href="/blog/tags/ThreadLocal/" style="font-size: 14px; color: #999">ThreadLocal</a> <a href="/blog/tags/ThreadPoolExecutor/" style="font-size: 14px; color: #999">ThreadPoolExecutor</a> <a href="/blog/tags/Zookeeper/" style="font-size: 14px; color: #999">Zookeeper</a> <a href="/blog/tags/Zuul/" style="font-size: 14px; color: #999">Zuul</a> <a href="/blog/tags/hexo/" style="font-size: 14px; color: #999">hexo</a> <a href="/blog/tags/hexo-theme/" style="font-size: 14px; color: #999">hexo theme</a>
    </div>
  </section>


        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
  
</aside>

<footer class="clearfix ">
  <br><br>
  
    <div class="social-wrapper">
      
        
          <a href="/atom.xml"
            class="social fas fa-rss fa-lg flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="mailto:739805340@qq.com"
            class="social fas fa-envelope fa-lg flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://github.com/zjcscut"
            class="social fab fa-github fa-lg flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
    </div>
  
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>
    本站使用
    <a href="https://xaoxuu.com/wiki/volantis/" target="_blank" class="codename">Volantis</a>
    作为主题
    
      ，
      总访问量为
      <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
      次
    
    。
  </div>
  
    <div class='copyright'>
    <p><a href="http://throwable.club">Copyright © 2017-2020 Throwable</a></p>

    </div>
  
</footer>
<script>setLoadingBarProgress(80);</script>




	<!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
	

	


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>

  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>

<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>














  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@20.2.30/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@20.2.30/js/search.js"></script>



  
    
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@20.2.30/js/commentTyping.js"></script>

  





<!-- 复制 -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>


<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>





<script src='https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/static/js/roll.js'></script>


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
